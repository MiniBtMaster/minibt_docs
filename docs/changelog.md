# 更新日志

所有对本项目的显著更改都将被记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.2.0] - 2026-2-2

### 🐛 修复实时图表相关问题

#### 功能修复

✅ **时区显示统一优化**：

- 修复实时图表时间时区错乱问题，所有K线、指标、信号标记等时间维度数据统一显示为东八区（GMT+8），确保时间戳与实际交易时间完全匹配。

✅ **修复期货停盘后开盘时K线更新异常**  

- 新增连续K线检测机制，智能识别市场停盘状态
- 优化时间戳容错处理，避免微小时间回退导致的更新中断
- 解决10:15-10:30等休市时段重新开盘时的图表更新问题

#### 功能增强

✅ **画图工具栏可配置化**：新增画图工具栏开关设置，支持通过策略配置属性灵活控制显示/隐藏：

- 策略设置属性 `toolbox` 布尔型属性（默认值：True）；
- 当 `self.toolbox=False` 时，图表界面隐藏画图工具栏，简化界面布局；
- 当 `self.toolbox=True`（默认）时，保留完整画图工具功能，支持画线标记等操作。

✅ **持仓线多样性**：

- 标签显示：图标+盈亏浮动，⬆️表示多仓，⬇️表示空仓；
- 浮盈时颜色为红色，浮亏时颜色为绿色；


## [1.1.9] - 2026-1-27


### 重大更新

#### **核心架构重构**

- ✅ **全面升级图表引擎**：从Bokeh迁移到Lightweight Charts
- ✅ **引入异步数据更新机制**：避免界面卡顿，支持更高频率的数据刷新
- ✅ **重构组件生命周期管理**：解决内存泄漏问题，资源占用低

#### **界面优化**

- ✅ **Fluent Design设计语言**：完全重新设计的现代化界面
- ✅ **明暗主题支持**：一键切换，适配不同环境
- ✅ **智能布局系统**：自适应不同分辨率和窗口大小
- ✅ **专业级分隔线**：视觉层次更清晰，拖动手感优化

#### **功能增强**

- ✅ **多合约实时切换**：双击合约列表即可无缝切换，无闪烁
- ✅ **动态指标系统**：支持实时添加/移除技术指标
- ✅ **增强信号标记**：支持多种标记形状和自定义标签
- ✅ **账户信息面板**：实时显示关键交易数据

#### **性能改进**

- ✅ **内存优化**：WebView资源回收机制，内存使用少
- ✅ **渲染优化**：价格轴宽度同步，避免布局跳动
- ✅ **定时器管理**：独立控制K线、指标、账户更新频率

#### **系统要求**

- Python 3.8+
- PyQt5 5.15+
- PyQt-Fluent-Widgets 1.6.6+
- Lightweight Charts Python 1.0+

#### **使用介绍**

- **[实时图表介绍](minibt_basic/1.21minibt_lightweight_charts.md)**


## [1.1.8] - 2026-1-1

### 优化后的内容（更清晰、规范、易理解）

#### `next` 函数中所有K线数据和指标均为最新数据

- 无需通过 `btindex` 获取当前最新数据
- 可通过**负数索引**或**便捷属性**直接访问当前及历史最新数据

#### 示例
```python
def next(self):
    # 访问当前最新的MA指标值（便捷属性方式，推荐）
    self.ma.new
    # 等同于负数索引方式
    self.ma.iloc[-1]

    # 访问上一根K线对应的MA指标值（便捷属性方式，推荐）
    self.ma.prev
    # 等同于负数索引方式
    self.ma.iloc[-2]
```

### 额外补充（增强实用性，便于使用者理解）
| 便捷属性                  | 负数索引                  | 含义说明                                             |
| ------------------------- | ------------------------- | ---------------------------------------------------- |
| `self.indicator.new`      | `self.indicator.iloc[-1]` | 当前最新一根K线对应的指标值                          |
| `self.indicator.prev`     | `self.indicator.iloc[-2]` | 上一根K线对应的指标值                                |
| `self.indicator.iloc[-n]` | -                         | 前n-1根K线对应的指标值（n为正整数，如n=3对应前两根） |

  
### 🐛 修复问题

#### 修复实时图表更新逻辑
  
- 修复K线及指标数据更新缺失的问题
- 修复交易信号偏移及缺失的问题

## [1.1.7] - 2025-12-15

### 更改内容
- **策略数据处理逻辑**：

    - 调整`StrategyRunner`的`_data_ready_flags`机制：新增数据就绪标志，确保所有策略数据入队后再聚合写入
    - 优化数据入队逻辑：仅入队原始格式数据，聚合阶段统一处理，减少格式转换错误

- **live_plot更新逻辑**：
  
    - 数据更新时非全部数据替换
    - 更换为`stream`和`patch`函数追加和替换数据，提升更新效率
  
### 🐛 修复问题

#### **修复策略回放中stop_lines显示问题**

- 在更新stop_lines内存数据的同时，同步更新pandas_object的底层数据
- 对于自定义指标数据更新，现在会自动同步到pandas对象中

#### **修复实时图表 K 线图 Y 轴与可视范围异常问题**

- 所有策略的 K 线可视范围（X/Y 轴）随数据更新同步调整，新高 / 新低时 Y 轴自动扩展，无数据变化时保持稳定
- 当有新K线时X轴向左推进
- Y轴创新高或创新低时自动调整Y轴可视范围


## [1.1.6] - 2025-12-12

### 删除内容
- **PandasTa类函数移除**：删除了以下三个逻辑运算函数：

    - `Any()` - 逻辑或运算
    - `All()` - 逻辑与运算  
    - `Where()` - 条件选择函数
    - **功能冗余**：这些函数的逻辑运算功能已完全涵盖在IndSeries的基本操作中
    - **简化API**：减少框架的复杂性，避免不必要的函数重载
    - **标准化操作**：鼓励使用Python原生的逻辑运算符(`&`, `|`, `~`, `where`, `mask`)等函数

- **AutoTrader类移除** ：适用性不强
- **SignalFeatures类移除** ：适用性不强


### 📊 新增指标功能

#### 1. 滚动窗口VWAP指标 (`vwap_window`)

- **功能描述**: 

    - 基于固定时间窗口计算的成交量加权平均价格
    - 不随时间周期重置，避免传统VWAP的日间断开问题
    - 提供动态的近期平均成本参考
    - 支持自定义窗口大小，适应不同交易周期需求
  
- **参数配置**:
  
    - `window`: 滚动窗口周期长度，默认20
    - 支持短线(5-10)、中线(20-50)、长线(100-200)多种配置

#### 2. 成交量分位数VWAP指标 (`vwap_volume_based`)

- **功能描述**: 

    - 基于成交量分位数动态调整重置点的自适应VWAP
    - 根据成交量分布而非时间周期确定重置点
    - 自适应市场成交量变化，高成交量时期重置更频繁
    - 反映实际成交成本分布，更适合成交量分析

- **参数配置**:

    - `volume_quantile`: 成交量分位数阈值(0-1)，默认0.25
    - `lookback`: 计算分位数的回看周期，默认100

### ⚠️ 更改说明
- 原指标`data.vwap()`针对日线数据，成交量索引为日期类型，不适合所有应用场景，函数已移除
- 新指标位于`data.btind.vwap_window()`和`data.btind.vwap_volume_based()`
- 建议根据策略需求选择合适的VWAP计算方法


### 🐛 修复问题

#### **修复`==`运算符返回标量的问题**

- 修复`==`运算符预期返回布尔值序列的内置指标对象
- 继承链中的`__eq__`方法被覆盖
- 删除`IndicatorsBase.__eq__`方法（存在数据可哈希风险）
- `BtNDFrame.__eq__`保持不变
  
#### **修复多策略图表在回放时无法生成问题**



## [1.1.5] - 2025-12-10

### 🐛 修复问题

#### 类型系统与代码提示修复

- **修复链式调用类型推断失效问题**
    - 解决了 `IndSeries` 与 `pd.Series[Any]` 类型混用导致的类型推断链断裂问题
    - 策略属性和指标属性返回类型统一指向`KLine, IndFrame, IndSeries, Line`

- **增强代码智能提示**
  
    - 现在链式调用可以正常显示所有方法的完整文档字符串
    - 方法签名和参数提示在VSCode/Pylance中显示更加准确
    - 支持深层链式调用的类型推断（如 `data.tradingview.Adaptive_Trend_Filter().signal`）

✅ **已修复 `select_dtypes` 方法兼容性问题**

通过将 `select_dtypes` 直接实现在 `IndFrame` 类中，绕过了装饰器的复杂参数传递问题。现在方法能够：
1. 正确接收 `include`/`exclude` 参数
2. 调用父类 pandas 方法获得准确筛选结果
3. 自动将结果转换为 `IndFrame` 或 `IndSeries` 类型
4. 保持与 pandas 原生 API 完全一致的参数行为和返回值语义

修复后用户可正常使用 `df.select_dtypes(include=['integer', 'floating'])` 等标准调用方式。

✅ **修复 `astype` 方法 `copy=False` 原地修改问题**

修复了 `IndFrame.astype()` 方法在 `copy=False` 参数下无法原地修改数据的 bug。现在：
1. 当 `copy=False` 时，会在原数据上直接进行类型转换，无需返回新对象
2. 保持与 pandas 一致的行为，确保原地操作的正确性
3. 兼容所有数据类型转换场景，包括整型、浮点型、布尔型等
4. 修复后支持 `pipe.astype(np.bool_, copy=False)` 等用法，数据能正确就地转换


✅ **修复 `pop` 方法原地删除列的实现**

优化了 `IndFrame.pop()` 方法的实现，确保原数据能被正确修改：
1. **正确返回弹出列**：返回的 `IndSeries` 包含正确的列名和指标配置
2. **保持数据一致性**：确保原 `IndFrame` 只剩下未弹出的列

修复后 `df.pop("A")` 能正确：

- 从 `df` 中删除 A 列（原地修改）
- 返回包含 A 列数据的 `IndSeries`
- 保持剩余 B 列的完整性

解决了之前原地修改失效的问题，确保与 pandas 一致的语义。


## **[1.1.4] - 2025-12-08**

### 🎯 **核心架构重构**

#### **重构索引功能**

- **完全重写索引系统**：新增 `MinibtIndexerBase` 基类和两个索引器实现（`MinibtLocIndexer`, `MinibtILocIndexer`）
- **智能数据类型转换**：引入 `_convert_to_minibt()` 方法，支持根据数据维度自动转换为 `KLine`、`IndFrame` 或 `IndSeries`
- **索引混入类**：新增 `MinibtIndexingMixin`，为所有minibt对象提供 `.loc`、`.iloc` 索引器（标量`.at`、`.iat`除外）

#### **架构改进**

- **多态索引器设计**：每个索引器同时继承自pandas对应索引器和 `MinibtIndexerBase`
- **统一后处理逻辑**：所有 `__setitem__` 操作后自动执行 `_after_setitem()` 方法

#### **数据转换增强**

- **自动K线识别**：`_is_kline_data()` 方法自动识别K线数据格式
- **智能对象创建**：根据数据维度自动创建对应minibt对象（一维→IndSeries，二维→IndFrame/KLine）
- **配置驱动转换**：通过 `options.check_conversion_mode()` 控制数据转换行为

#### **性能优化**

- **减少包装层开销**：直接操作内部pandas对象，避免多层包装
- **条件性数据复制**：只在必要时复制数据，提高内存效率
- **缓存优化**：改进内部数据引用机制，减少重复转换

## **[1.1.3] - 2025-12-07**

#### 🐛 **问题修复**

## **[1.1.2] - 2025-12-07**

#### 🐛 **问题修复**

## **[1.1.1] - 2025-12-06**

### ✨ **订单系统重大升级**

#### **新增订单类型系统**

- **新增 Order 类**：完整的订单数据类，支持多种订单类型和状态跟踪
- **新增 OrderType 枚举**：支持 Market、Close、Limit、Stop、StopLimit 五种订单类型
- **新增 OrderStatus 枚举**：完整的订单生命周期状态管理（Created、Submitted、Accepted、Partial、Completed、Canceled、Expired、Margin、Rejected）
- **新增 OrderSide 枚举**：清晰的买入/卖出方向标识

#### **增强 Broker 订单管理功能**

- **统一订单创建接口**：`create_order()` 方法支持所有订单类型
- **订单执行引擎**：支持市价单、收盘价单、限价单、止损单、止损限价单的智能执行
- **价格跳空处理**：在 `_can_order_execute()` 和 `_get_execute_price()` 方法中考虑价格跳空情况
- **订单有效期管理**：支持多种有效期类型（整数周期、绝对时间、时间间隔）
- **OCO订单支持**：完整的 One-Cancel-Others 订单关联管理
- **即时订单控制**：防止重复的即时订单（Market/Close），符合真实交易逻辑
- **部分成交支持**：订单可分批次成交，支持 Partial 状态
- **订单统计与查询**：丰富的订单查询、统计和管理功能

#### **新增订单执行特性**

- **执行价格智能计算**：根据订单类型和市场价格确定最优执行价格
- **订单生命周期管理**：完整的订单状态转换和跟踪
- **资金与风险校验**：订单执行前自动校验资金充足性
- **订单日志系统**：详细的订单创建、执行、状态变更日志
- **订单清理机制**：自动清理过期订单，释放内存

#### **示例策略更新**

- **新增订单示例策略**：提供多种订单使用模式示例
- **即时订单策略示例**：展示市价单和收盘价单的使用
- **条件订单策略示例**：展示限价单、止损单、止损限价单的应用
- **OCO订单策略示例**：展示止损止盈订单组的管理
- **高级订单管理示例**：展示分批建仓、部分成交、订单调整等高级功能

### 🔧 **技术优化**

- **类型注解完善**：完整的类型提示和文档字符串
- **错误处理增强**：完善的订单创建和执行的错误处理
- **性能优化**：订单处理性能优化，减少不必要的计算
- **内存管理**：自动清理过期订单，优化内存使用

### 📚 **文档更新**

- **[新增订单系统详细介绍](minibt_basic/1.20minibt_order_system.md)**：完整的订单系统架构和使用指南
- **使用示例丰富**：提供多种实际交易场景的示例代码


## **[1.1.0] - 2025-11-30**

### ✨ **API 优化**

- **统一核心数据类命名规范**
  
    - 将 `BtData` 重命名为 `KLine`（K线数据类）
    - 将 `dataframe` 重命名为 `IndFrame`（多维指标类）
    - 将 `Line` 含义明确为指标线（多维指标中的每列数据）
    - 将 `series` 重命名为 `IndSeries`（一维指标类）
  
- **API 方法语义优化**

    - 将策略中的 `get_kline` 方法更名为 `get_kline`，语义更清晰

### 🚀 **新增功能**

- **新增内置指标绘图函数 `btplot`**
  
    - 基于 Bokeh 的交互式金融图表绘制功能
    - 支持智能数据格式识别（OHLCV、时间序列、技术指标）
    - 提供暗黑/明亮双主题模式，适配不同视觉环境
    - 集成缩放、平移、悬停提示、十字准星等交互工具
    - 支持多环境自动适配（Jupyter Notebook 和独立浏览器）
    - 实现指标链式调用可视化，支持复杂技术指标叠加显示
    - 查看 [`btplot` 函数功能说明](minibt_basic/1.19minibt_interactive_financial_charting_with_btplot.md)

### 🐛 **问题修复**

- **修复内置指标可哈希问题**

    - 修复内置指标调用 pandas 方法时遇到的非可哈希错误
    - 优化指标实例的哈希实现，确保在多策略环境下的稳定运行

### 🔧 **功能优化**

- **图表布局自适应**

    - 自动调整图表尺寸适应显示容器
    - 优化移动端和桌面端的显示效果
    - 改进响应式设计，提升用户体验

- **专业金融可视化**

    - 标准K线图配色（红跌绿涨）
    - 成交量与价格联动显示
    - 技术指标信号自动标记
    - 时间序列轴智能格式化

- **代码质量提升**

    - 统一命名规范，提高代码可读性
    - 优化类层次结构，逻辑更清晰
    - 提供简写别名，兼顾编码效率和规范性

## **[1.0.9] - 2025-11-25**

### 🐛 **问题修复**

- **修复交易信号文字标签显示**

    - 修复交易信号文字标签显示逻辑（原代码有BUG）
    - 修复交易信号文字标签显示位置（自动设置文字偏移量）

## **[1.0.8] - 2025-11-24**

### ✨ **新增功能**

#### **专业交易日志系统 - 2025-11-23**

- **基于 Rich 的专业交易日志库**
  
    - 专为量化交易场景设计，去除传统 ERROR/INFO/WARNING 级别
    - 采用专业交易操作术语：开多、平多、开空、平空、创建等
    - 智能颜色编码：黄色（开仓/创建）、绿色（盈利平仓）、红色（亏损平仓）
    - 表情符号辅助识别，提升日志可读性
    - 查看 [日志简介](minibt_basic/1.18minibt_transaction_log.md)

- **完整的账户信息展示**
  
    - 美观的账户信息面板，显示账户权益、可用现金、累计收益等
    - 持仓详情表格展示，包含保证金、成交价、手数、手续费等关键信息
    - 自动计算总收益率和交易统计
    - 支持多合约持仓的清晰展示

- **策略回测报告生成**
  
    - 专业的策略回测报告，包含收益、风险、交易质量多维度指标
    - 三列布局展示：收益指标、风险指标、交易指标
    - 基于行业标准的性能评估系统
    - 自动格式化回测时间范围

- **丰富的日志功能**
  
    - 支持交易操作日志记录
    - 错误和警告处理（资金不足、交易失败、市场警告）
    - 性能监控装饰器，自动测量函数执行时间
    - 交易统计和最近交易记录展示

#### 🎯 **使用示例**

```python
from minibt import Logger, LogLevel

# 初始化日志系统
logger = Logger("my_strategy")

# 记录交易操作
logger.open_long("策略A", "IF2406", "2024-01-15 10:30:00", 3500.0, 1, 0.0, 1000000.0)
logger.close_short("策略A", "IF2406", "2024-01-15 11:30:00", 3480.0, 1, 0.0, 2000.0, 1002000.0)

# 打印账户和策略报告
logger.print_account(account)
logger.print_strategy(strategy)

# 性能监控
@logger.time_it
def process_data():
    pass
```

#### **策略集成优化 - 2025-11-23**

- **策略专用日志记录器**
  
    - 通过 `strategy.logger` 属性直接访问专用日志实例
    - 完善的类型注解和文档说明
    - 支持所有日志功能的便捷调用

### 🔧 **技术改进**

#### **日志系统架构**
- **单例模式头部管理**
  
    - 确保日志头部信息在整个会话中只显示一次
    - 智能的头部打印控制，避免重复输出
    - 支持手动强制打印头部

- **类型安全增强**
  
    - 完整的类型注解支持
    - 枚举类型定义日志级别
    - 完善的参数校验

- **性能优化**
  
    - 延迟初始化，按需创建日志组件
    - 文件日志异步写入
    - 内存使用优化

#### **时间处理优化**
- **统一的日期时间格式化**
  
    - 支持多种时间格式自动转换
    - 处理 numpy.datetime64、pandas.Timestamp 等格式
    - 统一的输出格式：`YYYY-MM-DD HH:MM:SS`

### 🐛 **问题修复**

- **修复头部重复打印问题**
  
    - 解决日志头部在多处调用时重复显示的问题
    - 优化 `print_header()` 方法的调用逻辑

- **修复时间格式转换异常**
  
    - 解决 numpy.datetime64 对象缺少 strftime 方法的问题
    - 改进时间格式化函数的兼容性

- **修复颜色显示问题**
  
    - 修正盈亏金额为0时的颜色显示逻辑
    - 优化操作类型的样式映射

### 🔄 **兼容性说明**

- **向后兼容**
  
    - 所有现有策略代码无需修改即可使用新日志系统
    - 原有日志接口保持兼容
    - 新增功能为可选扩展，不影响现有逻辑

- **依赖更新**
  
    - 新增依赖：rich >= 13.0.0（用于富文本终端输出）
    - 保持与现有依赖的兼容性

#### **窗口操作增强类 - 2025-11-20**

- **新增 `BtExponentialMovingWindow` 类**
  
    - 封装 Pandas 的指数加权移动窗口功能
    - 支持 `com`、`span`、`halflife`、`alpha` 等多种衰减参数（互斥使用）
    - 自动将计算结果转换为框架内置指标类型
    - 支持 `mean()`, `std()`, `var()`, `cov()`, `corr()` 等方法

- **新增 `BtExpanding` 类**
    - 封装 Pandas 的扩展窗口功能
    - 支持从数据起始点到当前点的累积统计计算
    - 自动将计算结果转换为框架内置指标类型
    - 支持 `count()`, `sum()`, `mean()`, `max()`, `min()`, `std()`, `var()` 等完整方法集

#### **内置指标增强 - 2025-11-20**

- **窗口操作自动类型转换**
  
    - `rolling()` 方法返回 `BtRolling` 对象，支持完整滚动窗口方法（原有功能）
    - `ewm()` 方法返回 `BtExponentialMovingWindow` 对象，支持指数加权移动计算（新增功能）
    - `expanding()` 方法返回 `BtExpanding` 对象，支持扩展窗口计算（新增功能）
    - 所有窗口操作结果自动转换为框架内置的 `IndSeries` 或 `IndFrame` 类型

#### 🎯 **使用示例**

```python
def next(self):
    # 滚动窗口计算
    self.ma = self.data.close.rolling(10).mean(overlap=True)
    self.std = self.data.close.rolling(20).std(overlap=True)

    # 指数加权移动平均
    self.ewm = self.data.close.ewm(span=10).mean(overlap=True)
    self.ewm_std = self.data.close.ewm(alpha=0.2).std(overlap=True)

    # 扩展窗口计算
    self.expanding_mean = self.data.close.expanding().mean(overlap=True)
    self.expanding_std = self.data.close.expanding().std(overlap=False)

    # 支持链式调用
    self.complex_indicator = (self.data.close.rolling(10).mean() - 
                             self.data.close.ewm(span=5).mean()).abs()

    # 多周期前值访问示例
    if self.ha.close.new > self.ha.close.prev > self.ha.close.sndprev:
        self.data.buy()
```

#### **图表交互优化 - 2025-11-18**

- **实时图表/K线回放智能数据更新**

    - 实时图表/K线回放时仅更新当前激活策略页面数据
    - 切换策略时自动加载对应数据，显著提升多程序运行性能

#### **界面交互增强 - 2025-11-17**

- **实时图表/K线回放交互式合约面板**
  
    - 新增可隐藏/显示的合约选择面板
    - 支持从面板快速切换合约图表界面
    - 实现策略标签页与合约面板的双向同步选择
    - 实现合约标签页与合约面板的双向同步选择

#### **指标访问优化 - 2025-11-12**

- **回测时支持多周期前值便捷访问**

  - 新增变量命名规范：

      - `new`：最新值（沿用原有逻辑）
      - `prev`：当前K线往前数第1个周期（保持原有简写）
      - `sndprev`：当前K线往前数第2个周期（新增）
      - `trdprev`：当前K线往前数第3个周期（新增）
      - `frthprev`：当前K线往前数第4个周期（新增）

  - 优化指标调用效率，支持在 minibt 回测场景中直接引用多阶前值，无需额外手动计算

#### 🎯 **使用示例**
```python
def next(self):
    # 当HA收盘价连续上涨时考虑买入
    if self.ha.close.new > self.ha.close.prev > self.ha.close.sndprev:
        self.data.buy()
```

### 🔧 **技术改进**

#### **基础架构优化**
- **重构 `BtBaseWindows` 基类**
  
    - 统一窗口操作类的属性访问逻辑
    - 使用 `__getattr__` 替代 `__getattribute__`，彻底解决循环引用问题
    - 优化装饰器逻辑，确保方法调用性能

#### **类型安全增强**

- 所有窗口操作方法返回类型标注完善
- 支持 `IndSeries`、`IndFrame` 类型的自动推断和转换
- 参数互斥性检查（如 EWM 的衰减参数）

#### **配置管理**

- 窗口操作自动继承原指标的配置参数
- 支持 `overlap` 参数控制是否允许窗口重叠
- 自动生成合理的指标名称（如 `close_rolling_mean`）

### 🐛 **问题修复**

- **修复循环引用问题**

    - 解决窗口操作类中 `__getattribute__` 导致的无限递归
    - 优化属性查找逻辑，避免装饰器调用链断裂

- **修复参数传递问题**
  
    - 修正 `Ellipsis` 默认值处理，确保参数正确传递
    - 统一各窗口类的参数校验逻辑

### 🔄 **兼容性说明**

- **向后兼容**
  
    - 所有现有策略代码无需修改即可正常运行
    - 原有 `rolling()` 方法行为保持不变
    - 新增功能为可选扩展，不影响现有逻辑

---

## **[1.0.7] - 2025-10-25**

### ✨ **新增功能**

#### **技术指标扩展 - 2025-10-25**

- **新增 `TqTa` (天勤Ta) 类指标支持**
  
    - 现在可以通过 `minibt.TqTa.RSI` 等方式直接调用天勤量化内置的技术指标
    - 这些指标经过优化，与天勤行情数据有更好的兼容性
    - 查看 [完整文档](minibt_api_reference/tqta.md)

#### **数据处理增强 - 2025-10-29**

- **新增 `IndFrame` 指标数据解包功能**
  
    - 支持对返回多列数据的指标进行直接解包操作
    - 极大简化了多返回值指标的使用
    - 支持所有返回多列数据的指标，包括 TqTa 指标和内置技术指标
    - 查看 [完整文档](minibt_tips/5.1_effortless_dataframe_indicator_unpacking.md)

#### 🎯 **使用示例**

```python
# TqTa 指标调用
rsi = TqTa(kline).RSI()
rsi = kline.tqta.RSI()

# DataFrame 解包功能
# MACD 指标
diff, dea, bar = self.data.close.tqta.MACD()
# HA 指标
open, high, low, close = self.data.ha()
# 函数中使用
def test(*args):
    ...
test(*self.data.ha())
```

### 🔧 **技术改进**

- 优化指标计算性能
- 改进内存使用效率

---

## **[1.0.6] - 2025-10-18**

### 🐛 **问题修复**

- 修复了在特定情况下，K线数据序列为空时导致的指标计算崩溃问题
- 解决了数据边界条件的异常处理

---

## **[1.0.5] - 2025-10-17**

### 🔧 **优化改进**

- 优化了数据获取模块的网络请求超时处理
- 提升了在弱网环境下的稳定性

### 🐛 **问题修复**

- 修复了 `DataFrame` 输出中日期时间索引格式不统一的问题

---

## **[1.0.4] - 2025-09-28**

### 🎉 **首次发布**

- **基础框架**
  
    - 支持基础K线数据获取与管理
    - 内置常用技术指标计算

- **核心功能**

    - 量化策略回测引擎
    - 实时行情数据接入
    - 交易信号生成与执行

---

## **[1.0.3] - 2025-09-07**
## **[1.0.2] - 2025-08-31**
## **[1.0.1] - 2025-08-26**
## **[1.0.0] - 2025-08-24**

*早期开发版本，功能基础完善中*

---

[1.2.0]: https://pypi.org/project/minibt/1.2.0/
[1.1.9]: https://pypi.org/project/minibt/1.1.9/
[1.1.8]: https://pypi.org/project/minibt/1.1.8/
[1.1.7]: https://pypi.org/project/minibt/1.1.7/
[1.1.6]: https://pypi.org/project/minibt/1.1.6/
[1.1.5]: https://pypi.org/project/minibt/1.1.5/
[1.1.4]: https://pypi.org/project/minibt/1.1.4/
[1.1.3]: https://pypi.org/project/minibt/1.1.3/
[1.1.2]: https://pypi.org/project/minibt/1.1.2/
[1.1.1]: https://pypi.org/project/minibt/1.1.1/
[1.0.9]: https://pypi.org/project/minibt/1.0.9/
[1.0.8]: https://pypi.org/project/minibt/1.0.8/
[1.0.7]: https://pypi.org/project/minibt/1.0.7/
[1.0.6]: https://pypi.org/project/minibt/1.0.6/
[1.0.5]: https://pypi.org/project/minibt/1.0.5/
[1.0.4]: https://pypi.org/project/minibt/1.0.4/
[1.0.3]: https://pypi.org/project/minibt/1.0.3/
[1.0.2]: https://pypi.org/project/minibt/1.0.2/
[1.0.1]: https://pypi.org/project/minibt/1.0.1/
[1.0.0]: https://pypi.org/project/minibt/1.0.0/